<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoDiagnose Classic | Expert Car Troubleshooting System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
            --secondary-bg: linear-gradient(135deg, #fffaf0 0%, #fdf6e3 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-hover: rgba(255, 255, 255, 0.98);
            --light-gold: #f5d0a9;
            --gold: #d4af37;
            --rose-gold: #b76e79;
            --soft-pink: #f8c8dc;
            --accent: #ff6b9d;
            --success: #4a9c82;
            --warning: #e6b800;
            --danger: #e63946;
            --text-dark: #4a4a4a;
            --text-light: #666666;
            --text-muted: #888888;
            --border: rgba(212, 175, 55, 0.3);
            --shadow: 0 8px 32px rgba(183, 110, 121, 0.1);
            --shadow-gold: 0 0 30px rgba(212, 175, 55, 0.15);
            --elegant-border: 1px solid rgba(212, 175, 55, 0.2);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        /* Elegant floral pattern background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 182, 193, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(183, 110, 121, 0.05) 0%, transparent 60%);
            background-attachment: fixed;
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header - Elegant Rose Gold */
        .header {
            text-align: center;
            padding: 60px 20px 40px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 800px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--rose-gold), var(--gold), var(--rose-gold), transparent);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            position: relative;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--gold), var(--light-gold));
            width: 85px;
            height: 85px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow), var(--shadow-gold);
            position: relative;
            overflow: hidden;
            border: 3px solid var(--soft-pink);
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3) 0%,
                transparent 50%
            );
            transform: rotate(45deg);
        }

        .logo-icon i {
            font-size: 38px;
            color: var(--text-dark);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .logo-text {
            text-align: left;
        }

        .logo-text h1 {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--rose-gold), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 10px rgba(183, 110, 121, 0.15);
        }

        .logo-text p {
            color: var(--rose-gold);
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-family: 'Cinzel', serif;
        }

        .tagline {
            font-size: 1.25rem;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto 50px;
            line-height: 1.8;
            text-align: center;
            font-weight: 300;
            background: rgba(255, 255, 255, 0.7);
            padding: 25px 40px;
            border-radius: 20px;
            border: var(--elegant-border);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            padding: 28px 38px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: var(--elegant-border);
            backdrop-filter: blur(10px);
            min-width: 170px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(183, 110, 121, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .stat:hover::before {
            opacity: 1;
        }

        .stat:hover {
            transform: translateY(-8px) scale(1.05);
            border-color: var(--rose-gold);
            box-shadow: var(--shadow), var(--shadow-gold), 0 15px 40px rgba(183, 110, 121, 0.2);
        }

        .stat-value {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--rose-gold);
            margin-bottom: 8px;
            font-family: 'Cinzel', serif;
            text-shadow: 0 2px 5px rgba(183, 110, 121, 0.2);
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 35px;
            margin-bottom: 50px;
        }

        @media (max-width: 1100px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Cards - Elegant Design */
        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 40px;
            box-shadow: var(--shadow);
            transition: all 0.4s ease;
            border: var(--elegant-border);
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--soft-pink), var(--gold));
            border-radius: 5px 0 0 5px;
        }

        .card:hover {
            transform: translateY(-5px);
            background: var(--card-hover);
            box-shadow: var(--shadow), 0 20px 50px rgba(183, 110, 121, 0.15);
            border-color: rgba(183, 110, 121, 0.4);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 18px;
            font-family: 'Cinzel', serif;
        }

        .card-title i {
            color: var(--rose-gold);
            font-size: 1.6rem;
        }

        .badge {
            background: linear-gradient(135deg, var(--soft-pink), var(--gold));
            color: var(--text-dark);
            padding: 10px 22px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            box-shadow: 0 6px 20px rgba(183, 110, 121, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* Knowledge Base */
        .rules-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 25px;
            margin-top: 20px;
            max-height: 550px;
            overflow-y: auto;
            padding-right: 15px;
        }

        .rules-container::-webkit-scrollbar {
            width: 8px;
        }

        .rules-container::-webkit-scrollbar-track {
            background: rgba(183, 110, 121, 0.1);
            border-radius: 10px;
        }

        .rules-container::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--soft-pink), var(--gold));
            border-radius: 10px;
        }

        .rule-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 18px;
            padding: 25px;
            border: 1px solid var(--border);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .rule-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(183, 110, 121, 0.08), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .rule-card:hover::before {
            opacity: 1;
        }

        .rule-card:hover {
            transform: translateY(-5px) translateX(5px);
            border-color: var(--rose-gold);
            box-shadow: 0 15px 35px rgba(183, 110, 121, 0.15);
        }

        .rule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .rule-id {
            background: linear-gradient(135deg, var(--accent), #ff8fab);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.3);
        }

        .rule-priority {
            color: var(--text-muted);
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rule-priority.critical { color: var(--danger); }
        .rule-priority.high { color: var(--warning); }
        .rule-priority.medium { color: var(--success); }

        .rule-body {
            font-family: 'Courier New', monospace;
            background: rgba(255, 240, 245, 0.8);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid var(--border);
            font-size: 0.95rem;
            border-left: 4px solid var(--gold);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .rule-conditions {
            color: var(--danger);
            font-weight: 600;
        }

        .rule-conclusion {
            color: var(--success);
            font-weight: 700;
            margin-top: 12px;
            display: block;
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
        }

        .rule-desc {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-top: 15px;
            line-height: 1.6;
            padding-left: 10px;
            border-left: 2px solid var(--soft-pink);
        }

        /* Symptoms Selector */
        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 18px;
            margin: 30px 0;
            max-height: 450px;
            overflow-y: auto;
            padding: 15px 15px 15px 0;
        }

        .symptoms-grid::-webkit-scrollbar {
            width: 8px;
        }

        .symptoms-grid::-webkit-scrollbar-track {
            background: rgba(183, 110, 121, 0.1);
            border-radius: 10px;
        }

        .symptoms-grid::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--soft-pink), var(--gold));
            border-radius: 10px;
        }

        .symptom-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .symptom-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(183, 110, 121, 0.08), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .symptom-item:hover::before {
            opacity: 1;
        }

        .symptom-item:hover {
            border-color: var(--rose-gold);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 30px rgba(183, 110, 121, 0.15);
        }

        .symptom-item input {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: var(--rose-gold);
            position: relative;
            z-index: 2;
        }

        .symptom-label {
            flex: 1;
            font-weight: 500;
            color: var(--text-dark);
            cursor: pointer;
            font-size: 1rem;
            position: relative;
            z-index: 2;
        }

        .symptom-icon {
            color: var(--rose-gold);
            font-size: 1.3rem;
            position: relative;
            z-index: 2;
        }

        .selected-symptoms-area {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0;
            min-height: 90px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 18px;
            border: 3px dashed rgba(183, 110, 121, 0.3);
            transition: all 0.4s ease;
        }

        .selected-symptoms-area:hover {
            border-color: rgba(183, 110, 121, 0.6);
            background: rgba(255, 255, 255, 0.95);
        }

        .selected-badge {
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 215, 0, 0.3));
            color: var(--rose-gold);
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: fadeIn 0.4s ease;
            font-size: 0.95rem;
            border: 1px solid rgba(183, 110, 121, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 18px;
            margin: 35px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 20px 40px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            min-width: 220px;
            position: relative;
            overflow: hidden;
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
            text-transform: uppercase;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--rose-gold), var(--gold));
            color: white;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(183, 110, 121, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(183, 110, 121, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, rgba(230, 57, 70, 0.15), rgba(230, 57, 70, 0.05));
            color: var(--danger);
            border: 2px solid rgba(230, 57, 70, 0.3);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, rgba(230, 57, 70, 0.25), rgba(230, 57, 70, 0.15));
            border-color: var(--danger);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(230, 57, 70, 0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, rgba(74, 156, 130, 0.15), rgba(74, 156, 130, 0.05));
            color: var(--success);
            border: 2px solid rgba(74, 156, 130, 0.3);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, rgba(74, 156, 130, 0.25), rgba(74, 156, 130, 0.15));
            border-color: var(--success);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(74, 156, 130, 0.2);
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 45px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            margin: 25px 0;
            border: var(--elegant-border);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
        }

        .loading i {
            font-size: 3rem;
            color: var(--rose-gold);
            margin-bottom: 25px;
            animation: spin 1.5s linear infinite;
            filter: drop-shadow(0 0 10px rgba(183, 110, 121, 0.3));
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Inference Log */
        .inference-log {
            max-height: 550px;
            overflow-y: auto;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            margin-top: 25px;
            border: var(--elegant-border);
            backdrop-filter: blur(10px);
            box-shadow: inset 0 2px 15px rgba(0, 0, 0, 0.05);
        }

        .inference-log::-webkit-scrollbar {
            width: 8px;
        }

        .inference-log::-webkit-scrollbar-track {
            background: rgba(183, 110, 121, 0.1);
            border-radius: 10px;
        }

        .inference-log::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--soft-pink), var(--gold));
            border-radius: 10px;
        }

        .log-entry {
            padding: 28px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border-left: 5px solid var(--gold);
            animation: slideIn 0.5s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .log-entry:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-25px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .log-step {
            font-weight: 700;
            color: var(--rose-gold);
            font-size: 1.2rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'Cinzel', serif;
        }

        .log-rule {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.15), rgba(255, 143, 171, 0.1));
            color: var(--accent);
            padding: 8px 18px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: 700;
            border: 1px solid rgba(255, 107, 157, 0.3);
        }

        .log-fact {
            background: linear-gradient(135deg, rgba(74, 156, 130, 0.15), rgba(74, 156, 130, 0.1));
            color: var(--success);
            padding: 8px 18px;
            border-radius: 8px;
            font-weight: 700;
            border: 1px solid rgba(74, 156, 130, 0.3);
        }

        .log-desc {
            color: var(--text-light);
            margin-top: 15px;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* Results */
        .results-container {
            margin-top: 60px;
        }

        .diagnosis-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 240, 245, 0.95));
            border-radius: 25px;
            padding: 45px;
            text-align: center;
            border: var(--elegant-border);
            box-shadow: var(--shadow), var(--shadow-gold);
            position: relative;
            overflow: hidden;
        }

        .diagnosis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--soft-pink), var(--gold), var(--rose-gold));
        }

        .diagnosis-title {
            font-size: 2rem;
            color: var(--rose-gold);
            margin-bottom: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            font-family: 'Cinzel', serif;
        }

        .diagnosis-title i {
            color: var(--gold);
            font-size: 2.5rem;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
        }

        .diagnosis-result {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--rose-gold), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 35px 0;
            position: relative;
            display: inline-block;
            padding: 0 35px;
            font-family: 'Cinzel', serif;
            text-shadow: 0 2px 15px rgba(183, 110, 121, 0.2);
        }

        .diagnosis-result::before,
        .diagnosis-result::after {
            content: '✦';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gold);
            font-size: 2.5rem;
            opacity: 0.7;
        }

        .diagnosis-result::before {
            left: 0;
        }

        .diagnosis-result::after {
            right: 0;
        }

        .solution-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 35px;
            margin: 30px 0;
            border-left: 5px solid var(--gold);
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(183, 110, 121, 0.15);
        }

        .solution-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(183, 110, 121, 0.05), transparent);
        }

        .solution-title {
            font-size: 1.6rem;
            color: var(--text-dark);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
            font-family: 'Cinzel', serif;
        }

        .solution-title i {
            color: var(--gold);
            font-size: 1.8rem;
        }

        .solution-steps {
            list-style: none;
            padding-left: 0;
        }

        .solution-steps li {
            padding: 20px 0;
            border-bottom: 1px solid rgba(183, 110, 121, 0.1);
            display: flex;
            align-items: flex-start;
            gap: 30px;
            transition: all 0.3s ease;
        }

        .solution-steps li:hover {
            background: rgba(255, 240, 245, 0.5);
            padding-left: 15px;
            border-radius: 12px;
        }

        .solution-steps li:last-child {
            border-bottom: none;
        }

        .step-number {
            background: linear-gradient(135deg, var(--gold), var(--light-gold));
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
            margin-top: 2px;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.3);
            border: 2px solid white;
        }

        .solution-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-light);
            font-size: 1rem;
        }

        .solution-meta span {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 70px 20px 50px;
            color: var(--text-light);
            margin-top: 100px;
            border-top: 1px solid var(--border);
            position: relative;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 30px 30px 0 0;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 800px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--rose-gold), var(--gold), var(--rose-gold), transparent);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 45px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.4s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 25px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--border);
        }

        .footer-links a:hover {
            color: var(--rose-gold);
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(183, 110, 121, 0.15);
            border-color: var(--rose-gold);
        }

        .copyright {
            font-size: 1rem;
            margin-top: 35px;
            color: var(--text-light);
        }

        .copyright p:first-child {
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--rose-gold);
            font-family: 'Cinzel', serif;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 40px 15px 30px;
            }
            
            .logo-text h1 {
                font-size: 2.5rem;
            }
            
            .btn {
                min-width: 100%;
                padding: 18px 25px;
            }
            
            .stats {
                gap: 20px;
            }
            
            .stat {
                min-width: 150px;
                padding: 25px 30px;
            }
            
            .stat-value {
                font-size: 2.2rem;
            }
            
            .diagnosis-result {
                font-size: 2.5rem;
            }
            
            .rules-container {
                grid-template-columns: 1fr;
            }
            
            .symptoms-grid {
                grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            }
            
            .main-layout {
                gap: 25px;
            }
            
            .card {
                padding: 30px;
            }
            
            .logo {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .logo-text {
                text-align: center;
            }
        }

        /* Decorative Elements */
        .decorative-corner {
            position: fixed;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 182, 193, 0.2) 0%, transparent 70%);
            z-index: -1;
        }

        .corner-1 {
            top: -150px;
            left: -150px;
        }

        .corner-2 {
            bottom: -150px;
            right: -150px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, transparent 70%);
        }

        /* Floating Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .floating-icon {
            position: absolute;
            font-size: 24px;
            color: rgba(183, 110, 121, 0.2);
            z-index: -1;
            animation: float 20s infinite ease-in-out;
        }

        .floating-icon:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .floating-icon:nth-child(2) { top: 20%; right: 10%; animation-delay: -5s; }
        .floating-icon:nth-child(3) { bottom: 15%; left: 15%; animation-delay: -10s; }
        .floating-icon:nth-child(4) { bottom: 25%; right: 5%; animation-delay: -15s; }
    </style>
</head>
<body>
    <!-- Decorative corners -->
    <div class="decorative-corner corner-1"></div>
    <div class="decorative-corner corner-2"></div>
    
    <!-- Floating decorative icons -->
    <i class="fas fa-cog floating-icon"></i>
    <i class="fas fa-wrench floating-icon"></i>
    <i class="fas fa-car floating-icon"></i>
    <i class="fas fa-tools floating-icon"></i>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-car-mechanic"></i>
                </div>
                <div class="logo-text">
                    <h1>AutoDiagnose Classic</h1>
                    <p>Expert Car Troubleshooting System</p>
                </div>
            </div>
            
            <p class="tagline">
                An intelligent rule-based expert system using forward chaining inference to diagnose 
                vehicle issues with precision. Select symptoms below to begin analysis.
            </p>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="ruleCount">15</div>
                    <div class="stat-label">Expert Rules</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="symptomCount">26</div>
                    <div class="stat-label">Symptoms</div>
                </div>
                <div class="stat">
                    <div class="stat-value">95%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat">
                    <div class="stat-value">&lt;2s</div>
                    <div class="stat-label">Diagnosis Time</div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-layout">
            <!-- Left Column: Knowledge Base -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-brain"></i> Knowledge Base</h2>
                    <span class="badge">15 Expert Rules</span>
                </div>
                <div class="rules-container" id="rulesList">
                    <!-- Rules will be populated by JavaScript -->
                </div>
            </div>

            <!-- Right Column: Symptoms & Diagnosis -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-stethoscope"></i> Symptom Assessment</h2>
                    <span class="badge">Interactive</span>
                </div>
                
                <p style="margin-bottom: 25px; color: var(--text-light); font-size: 1.1rem;">
                    Select all symptoms that apply to your vehicle:
                </p>
                
                <div class="symptoms-grid" id="factsInput">
                    <!-- Symptoms checkboxes will be populated by JavaScript -->
                </div>
                
                <h3 style="margin-top: 35px; color: var(--rose-gold); font-family: 'Cinzel', serif; font-size: 1.5rem;">Selected Symptoms</h3>
                <div class="selected-symptoms-area" id="selectedFacts">
                    <p style="color: var(--text-muted); text-align: center; width: 100%; font-style: italic; padding: 25px; font-size: 1.1rem;">
                        No symptoms selected yet. Check symptoms above to add them here.
                    </p>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" id="startDiagnosisBtn">
                        <i class="fas fa-play-circle"></i> Start Diagnosis
                    </button>
                    <button class="btn btn-danger" id="clearAllBtn">
                        <i class="fas fa-redo"></i> Clear All
                    </button>
                    <button class="btn btn-success" id="loadExampleBtn">
                        <i class="fas fa-vial"></i> Load Example
                    </button>
                </div>

                <!-- Loading Animation -->
                <div class="loading" id="loadingAnimation">
                    <i class="fas fa-cog"></i>
                    <p style="color: var(--rose-gold); font-size: 1.2rem; margin-top: 15px; font-weight: 600;">Running forward chaining inference...</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">Please wait while the system analyzes your symptoms</p>
                </div>
            </div>
        </div>

        <!-- Inference Process -->
        <div class="card" style="margin-top: 50px;">
            <div class="card-header">
                <h2 class="card-title"><i class="fas fa-project-diagram"></i> Inference Process</h2>
                <span class="badge">Forward Chaining</span>
            </div>
            <div class="inference-log" id="inferenceLog">
                <div class="log-entry" style="border-left-color: var(--soft-pink);">
                    <div class="log-step"><i class="fas fa-info-circle"></i> System Ready</div>
                    <p>Select symptoms and click "Start Diagnosis" to begin the inference process.</p>
                    <p class="log-desc">The system will use forward chaining to analyze your symptoms against 15 expert rules, providing step-by-step reasoning.</p>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-container" id="resultsContainer">
            <!-- Results will be populated here -->
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="#"><i class="fas fa-book"></i> Documentation</a>
                <a href="#"><i class="fas fa-database"></i> Rule Library</a>
                <a href="#"><i class="fas fa-chart-bar"></i> Accuracy Report</a>
                <a href="#"><i class="fas fa-question-circle"></i> Help Center</a>
                <a href="#"><i class="fas fa-envelope"></i> Contact Support</a>
            </div>
            <div class="copyright">
                <p>© 2024 AutoDiagnose Classic | Expert System | Forward Chaining Inference Engine</p>
                <p style="margin-top: 15px; font-size: 0.95rem;">
                    This system uses forward chaining inference with 15 diagnostic rules for vehicle troubleshooting.
                    Built with precision engineering and elegant design.
                </p>
            </div>
        </footer>
    </div>

    <script>
        // ========== KNOWLEDGE BASE ==========
        const rules = [
            {
                id: "R1",
                conditions: ["engine_wont_start", "no_cranking_sound"],
                conclusion: "dead_battery",
                description: "No cranking sound indicates complete battery failure",
                priority: "critical",
                confidence: "95%"
            },
            {
                id: "R2",
                conditions: ["engine_wont_start", "cranking_sound", "no_fuel_smell"],
                conclusion: "fuel_system_issue",
                description: "Normal cranking without fuel smell points to fuel system problems",
                priority: "high",
                confidence: "85%"
            },
            {
                id: "R3",
                conditions: ["engine_wont_start", "cranking_sound", "fuel_smell"],
                conclusion: "ignition_system_issue",
                description: "Cranking with fuel smell indicates ignition problems",
                priority: "high",
                confidence: "80%"
            },
            {
                id: "R4",
                conditions: ["engine_misfires", "rough_idle"],
                conclusion: "spark_plugs_fouled",
                description: "Misfires with rough idle suggest fouled spark plugs",
                priority: "medium",
                confidence: "75%"
            },
            {
                id: "R5",
                conditions: ["overheating", "coolant_leak"],
                conclusion: "cooling_system_leak",
                description: "Overheating with visible coolant leak indicates cooling system failure",
                priority: "critical",
                confidence: "90%"
            },
            {
                id: "R6",
                conditions: ["overheating", "fan_not_working"],
                conclusion: "radiator_fan_fault",
                description: "Overheating without fan operation suggests fan failure",
                priority: "high",
                confidence: "85%"
            },
            {
                id: "R7",
                conditions: ["squealing_sound", "braking"],
                conclusion: "worn_brake_pads",
                description: "Squealing during braking indicates brake pads are worn",
                priority: "high",
                confidence: "95%"
            },
            {
                id: "R8",
                conditions: ["grinding_sound", "braking"],
                conclusion: "worn_brake_rotors",
                description: "Grinding noise suggests severely worn brake rotors",
                priority: "critical",
                confidence: "90%"
            },
            {
                id: "R9",
                conditions: ["soft_brake_pedal", "brake_warning_light"],
                conclusion: "brake_fluid_leak",
                description: "Soft pedal with warning light indicates brake fluid leak",
                priority: "critical",
                confidence: "88%"
            },
            {
                id: "R10",
                conditions: ["dim_lights", "electrical_issues"],
                conclusion: "alternator_problem",
                description: "Dim lights with electrical issues suggest alternator failure",
                priority: "high",
                confidence: "82%"
            },
            {
                id: "R11",
                conditions: ["battery_warning_light", "electrical_issues"],
                conclusion: "charging_system_fault",
                description: "Battery light with electrical problems indicates charging system fault",
                priority: "high",
                confidence: "85%"
            },
            {
                id: "R12",
                conditions: ["delayed_shifting", "transmission_slipping"],
                conclusion: "low_transmission_fluid",
                description: "Delayed shifting with slipping indicates low transmission fluid",
                priority: "medium",
                confidence: "78%"
            },
            {
                id: "R13",
                conditions: ["burning_smell", "transmission_slipping"],
                conclusion: "overheating_transmission",
                description: "Burning smell with slipping suggests transmission overheating",
                priority: "critical",
                confidence: "90%"
            },
            {
                id: "R14",
                conditions: ["check_engine_light", "poor_fuel_economy"],
                conclusion: "oxygen_sensor_fault",
                description: "Check engine light with poor fuel economy suggests oxygen sensor failure",
                priority: "medium",
                confidence: "75%"
            },
            {
                id: "R15",
                conditions: ["excessive_exhaust_smoke", "blue_smoke"],
                conclusion: "oil_burning",
                description: "Blue exhaust smoke indicates engine burning oil",
                priority: "high",
                confidence: "88%"
            }
        ];

        // Symptoms/All Facts
        const allFacts = [
            {id: "engine_wont_start", label: "Engine won't start", icon: "fas fa-engine"},
            {id: "engine_misfires", label: "Engine misfires", icon: "fas fa-car-burst"},
            {id: "rough_idle", label: "Rough idle", icon: "fas fa-vihara"},
            {id: "overheating", label: "Engine overheats", icon: "fas fa-temperature-high"},
            {id: "squealing_sound", label: "Squealing sound from brakes", icon: "fas fa-volume-up"},
            {id: "grinding_sound", label: "Grinding sound", icon: "fas fa-cogs"},
            {id: "braking", label: "Sound when braking", icon: "fas fa-braille"},
            {id: "soft_brake_pedal", label: "Soft brake pedal", icon: "fas fa-pedal-alt"},
            {id: "brake_warning_light", label: "Brake warning light", icon: "fas fa-exclamation-triangle"},
            {id: "no_cranking_sound", label: "No cranking sound", icon: "fas fa-volume-mute"},
            {id: "cranking_sound", label: "Engine cranks, won't start", icon: "fas fa-play-circle"},
            {id: "fuel_smell", label: "Fuel smell", icon: "fas fa-gas-pump"},
            {id: "no_fuel_smell", label: "No fuel smell", icon: "fas fa-wind"},
            {id: "coolant_leak", label: "Coolant leak", icon: "fas fa-tint-slash"},
            {id: "fan_not_working", label: "Fan not working", icon: "fas fa-fan"},
            {id: "dim_lights", label: "Dim lights", icon: "fas fa-lightbulb"},
            {id: "electrical_issues", label: "Electrical issues", icon: "fas fa-bolt"},
            {id: "battery_warning_light", label: "Battery warning light", icon: "fas fa-car-battery"},
            {id: "delayed_shifting", label: "Delayed shifting", icon: "fas fa-cog"},
            {id: "transmission_slipping", label: "Transmission slipping", icon: "fas fa-sliders-h"},
            {id: "burning_smell", label: "Burning smell", icon: "fas fa-fire"},
            {id: "check_engine_light", label: "Check engine light", icon: "fas fa-engine-warning"},
            {id: "poor_fuel_economy", label: "Poor fuel economy", icon: "fas fa-gas-pump"},
            {id: "excessive_exhaust_smoke", label: "Excessive exhaust smoke", icon: "fas fa-smog"},
            {id: "blue_smoke", label: "Blue smoke", icon: "fas fa-smoke"},
            {id: "white_smoke", label: "White smoke", icon: "fas fa-cloud"}
        ];

        // Solutions for conclusions
        const solutions = {
            "dead_battery": {
                title: "Battery Replacement",
                severity: "Critical",
                steps: [
                    "Test battery voltage (should be 12.6V or higher)",
                    "Jump start vehicle if voltage is below 11.8V",
                    "Clean battery terminals and connections",
                    "Replace battery if unable to hold charge",
                    "Test alternator output (should be 13.5-14.5V)"
                ],
                estimatedCost: "$150-$300",
                time: "30-60 minutes"
            },
            "fuel_system_issue": {
                title: "Fuel System Diagnostics",
                severity: "High",
                steps: [
                    "Check fuel pump fuse and relay",
                    "Test fuel pressure at fuel rail",
                    "Listen for pump priming sound when key is turned",
                    "Inspect fuel filter for clogs",
                    "Test fuel injectors"
                ],
                estimatedCost: "$200-$600",
                time: "2-3 hours"
            },
            "ignition_system_issue": {
                title: "Ignition System Repair",
                severity: "High",
                steps: [
                    "Check spark plugs for wear or fouling",
                    "Test ignition coils with multimeter",
                    "Inspect distributor cap and rotor if applicable",
                    "Check ignition timing",
                    "Test crankshaft position sensor"
                ],
                estimatedCost: "$150-$500",
                time: "2-4 hours"
            },
            "spark_plugs_fouled": {
                title: "Spark Plug Replacement",
                severity: "Medium",
                steps: [
                    "Remove and inspect spark plugs",
                    "Check gap specification",
                    "Replace with OEM recommended plugs",
                    "Inspect ignition wires",
                    "Reset engine computer if needed"
                ],
                estimatedCost: "$100-$300",
                time: "1-2 hours"
            },
            "cooling_system_leak": {
                title: "Cooling System Repair",
                severity: "Critical",
                steps: [
                    "Pressure test cooling system",
                    "Identify leak source with UV dye",
                    "Replace damaged hoses or radiator",
                    "Refill with proper coolant mixture",
                    "Bleed air from cooling system"
                ],
                estimatedCost: "$200-$800",
                time: "2-6 hours"
            },
            "radiator_fan_fault": {
                title: "Radiator Fan Repair",
                severity: "High",
                steps: [
                    "Test fan motor with direct 12V power",
                    "Check fan relay and fuse",
                    "Test coolant temperature sensor",
                    "Replace faulty fan or relay",
                    "Verify proper operation at temperature"
                ],
                estimatedCost: "$150-$400",
                time: "1-2 hours"
            },
            "worn_brake_pads": {
                title: "Brake Pad Replacement",
                severity: "High",
                steps: [
                    "Remove wheels and inspect brake pads",
                    "Check rotor condition",
                    "Replace brake pads",
                    "Resurface rotors if necessary",
                    "Test brake performance"
                ],
                estimatedCost: "$150-$400",
                time: "1-2 hours"
            },
            "worn_brake_rotors": {
                title: "Brake Rotor Replacement",
                severity: "Critical",
                steps: [
                    "Measure rotor thickness",
                    "Check for warping or scoring",
                    "Replace worn rotors",
                    "Replace brake pads simultaneously",
                    "Bed-in new brakes properly"
                ],
                estimatedCost: "$300-$600",
                time: "2-3 hours"
            },
            "brake_fluid_leak": {
                title: "Brake System Leak Repair",
                severity: "Critical",
                steps: [
                    "Inspect brake lines for leaks",
                    "Check master cylinder",
                    "Inspect calipers and wheel cylinders",
                    "Repair or replace leaking components",
                    "Bleed brake system and refill fluid"
                ],
                estimatedCost: "$200-$500",
                time: "2-4 hours"
            },
            "alternator_problem": {
                title: "Alternator Replacement",
                severity: "High",
                steps: [
                    "Test alternator output voltage",
                    "Check drive belt tension",
                    "Inspect wiring connections",
                    "Replace faulty alternator",
                    "Test charging system after repair"
                ],
                estimatedCost: "$300-$700",
                time: "1-2 hours"
            }
        };

        // ========== INITIALIZE UI ==========
        function initializeUI() {
            // Display all rules in the knowledge base
            const rulesList = document.getElementById('rulesList');
            rules.forEach(rule => {
                const ruleCard = document.createElement('div');
                ruleCard.className = 'rule-card';
                ruleCard.innerHTML = `
                    <div class="rule-header">
                        <span class="rule-id">${rule.id}</span>
                        <span class="rule-priority ${rule.priority}">
                            <i class="fas fa-${rule.priority === 'critical' ? 'exclamation-triangle' : 
                                            rule.priority === 'high' ? 'exclamation-circle' : 
                                            'info-circle'}"></i>
                            ${rule.priority.charAt(0).toUpperCase() + rule.priority.slice(1)} Priority
                        </span>
                    </div>
                    <div class="rule-body">
                        IF <span class="rule-conditions">${rule.conditions.join(' AND ')}</span><br>
                        THEN <span class="rule-conclusion">${rule.conclusion}</span>
                    </div>
                    <div class="rule-desc">${rule.description} (Confidence: ${rule.confidence})</div>
                `;
                rulesList.appendChild(ruleCard);
            });

            // Create symptom checkboxes
            const factsInput = document.getElementById('factsInput');
            allFacts.forEach(fact => {
                const symptomItem = document.createElement('div');
                symptomItem.className = 'symptom-item';
                symptomItem.innerHTML = `
                    <input type="checkbox" id="${fact.id}" value="${fact.id}">
                    <i class="${fact.icon} symptom-icon"></i>
                    <label for="${fact.id}" class="symptom-label">${fact.label}</label>
                `;
                factsInput.appendChild(symptomItem);
                
                // Add event listener to update selected facts display
                const checkbox = symptomItem.querySelector('input');
                checkbox.addEventListener('change', updateSelectedFacts);
            });
            
            // Update counts in UI
            document.getElementById('ruleCount').textContent = rules.length;
            document.getElementById('symptomCount').textContent = allFacts.length;
            
            // Initialize selected facts display
            updateSelectedFacts();
        }

        // ========== UPDATE SELECTED FACTS DISPLAY ==========
        function updateSelectedFacts() {
            const selectedFactsDiv = document.getElementById('selectedFacts');
            selectedFactsDiv.innerHTML = '';
            
            const selectedFacts = [];
            allFacts.forEach(fact => {
                const checkbox = document.getElementById(fact.id);
                if (checkbox && checkbox.checked) {
                    selectedFacts.push(fact.id);
                    const badge = document.createElement('div');
                    badge.className = 'selected-badge';
                    badge.innerHTML = `
                        <i class="${fact.icon}"></i>
                        ${fact.label}
                    `;
                    selectedFactsDiv.appendChild(badge);
                }
            });
            
            if (selectedFacts.length === 0) {
                selectedFactsDiv.innerHTML = '<p style="color: var(--text-muted); text-align: center; width: 100%; font-style: italic; padding: 25px; font-size: 1.1rem;">No symptoms selected yet. Check symptoms above to add them here.</p>';
            }
        }

        // ========== FORWARD CHAINING ALGORITHM ==========
        function runInference() {
            // Get selected facts
            const selectedFacts = [];
            allFacts.forEach(fact => {
                const checkbox = document.getElementById(fact.id);
                if (checkbox && checkbox.checked) {
                    selectedFacts.push(fact.id);
                }
            });

            if (selectedFacts.length === 0) {
                alert("Please select at least one symptom to begin diagnosis.");
                return;
            }

            // Show loading animation
            document.getElementById('loadingAnimation').style.display = 'block';
            
            // Clear and setup log
            const log = document.getElementById('inferenceLog');
            const resultsContainer = document.getElementById('resultsContainer');
            log.innerHTML = '';
            resultsContainer.innerHTML = '';

            // Start inference
            log.innerHTML = `
                <div class="log-entry" style="border-left-color: var(--accent);">
                    <div class="log-step"><i class="fas fa-play"></i> Inference Started</div>
                    <p>Beginning forward chaining with ${selectedFacts.length} initial symptom(s)</p>
                </div>
            `;

            // Small delay to show the initial message
            setTimeout(() => {
                // Show initial facts
                const initialFactsText = selectedFacts.map(f => {
                    const factObj = allFacts.find(x => x.id === f);
                    return factObj ? factObj.label : f;
                }).join(', ');
                
                log.innerHTML += `
                    <div class="log-entry">
                        <div class="log-step">Step 2: Initial Facts</div>
                        <p>Detected symptoms: <span class="log-fact">${initialFactsText}</span></p>
                    </div>
                `;

                // Run forward chaining
                const inferenceResult = performForwardChaining(selectedFacts);
                
                // Hide loading animation
                document.getElementById('loadingAnimation').style.display = 'none';
                
                // Display final results
                displayConclusions(inferenceResult);
                
            }, 800);
        }

        // ========== PERFORM FORWARD CHAINING ==========
        function performForwardChaining(initialFacts) {
            const log = document.getElementById('inferenceLog');
            let allFacts = [...initialFacts];
            let firedRules = [];
            let iteration = 2; // Start from step 3 (after initial facts)
            let newFactsAdded = true;
            let maxIterations = 20; // Safety limit
            
            // Forward chaining loop
            while (newFactsAdded && maxIterations > 0) {
                newFactsAdded = false;
                
                // Check each rule
                for (const rule of rules) {
                    // Skip if rule already fired
                    if (firedRules.includes(rule.id)) continue;
                    
                    // Check if all conditions are met
                    const allConditionsMet = rule.conditions.every(condition => 
                        allFacts.includes(condition)
                    );
                    
                    if (allConditionsMet) {
                        // Fire the rule
                        firedRules.push(rule.id);
                        newFactsAdded = true;
                        iteration++;
                        
                        // Add conclusion to facts if not already present
                        if (!allFacts.includes(rule.conclusion)) {
                            allFacts.push(rule.conclusion);
                            
                            // Get condition labels for display
                            const conditionsText = rule.conditions.map(c => {
                                const factObj = allFacts.find(x => x.id === c);
                                return factObj ? factObj.label : c;
                            }).join(' AND ');
                            
                            // Log the rule firing
                            log.innerHTML += `
                                <div class="log-entry">
                                    <div class="log-step">Step ${iteration}: Rule Fired <span class="log-rule">${rule.id}</span></div>
                                    <p>Applied: <strong>IF ${conditionsText} THEN ${rule.conclusion}</strong></p>
                                    <p class="log-desc">${rule.description}</p>
                                    <p>New fact inferred: <span class="log-fact">${rule.conclusion}</span></p>
                                </div>
                            `;
                            
                            // Scroll to bottom of log
                            log.scrollTop = log.scrollHeight;
                        }
                        
                        // Break to restart rule checking with new facts
                        break;
                    }
                }
                
                maxIterations--;
            }
            
            // Inference complete
            iteration++;
            log.innerHTML += `
                <div class="log-entry" style="border-left-color: var(--success);">
                    <div class="log-step"><i class="fas fa-flag-checkered"></i> Inference Complete</div>
                    <p>Processed ${firedRules.length} rules, ${allFacts.length} total facts inferred</p>
                    <p>Final facts: <span class="log-fact">${allFacts.join(', ')}</span></p>
                </div>
            `;
            
            // Scroll to bottom
            log.scrollTop = log.scrollHeight;
            
            return {
                allFacts: allFacts,
                firedRules: firedRules,
                initialFacts: initialFacts
            };
        }

        // ========== DISPLAY CONCLUSIONS ==========
        function displayConclusions(inferenceResult) {
            const resultsContainer = document.getElementById('resultsContainer');
            const { allFacts, initialFacts } = inferenceResult;
            
            // Filter out the initial symptoms to get only diagnostic conclusions
            const diagnosticFacts = allFacts.filter(fact => 
                !initialFacts.includes(fact) && 
                Object.keys(solutions).includes(fact)
            );

            if (diagnosticFacts.length === 0) {
                // No specific issues found
                resultsContainer.innerHTML = `
                    <div class="diagnosis-card">
                        <div class="diagnosis-title"><i class="fas fa-search"></i> Diagnosis Complete</div>
                        <div class="diagnosis-result">No Specific Issues Found</div>
                        <div class="solution-card">
                            <div class="solution-title"><i class="fas fa-lightbulb"></i> Recommended Action</div>
                            <ul class="solution-steps">
                                <li><span class="step-number">1</span> Check basic items: fuel level, battery connections, fuses</li>
                                <li><span class="step-number">2</span> Consider professional diagnostic scan if symptoms persist</li>
                                <li><span class="step-number">3</span> Review vehicle maintenance schedule</li>
                                <li><span class="step-number">4</span> Try adding more specific symptoms for better diagnosis</li>
                                <li><span class="step-number">5</span> Check for recalls or technical service bulletins for your vehicle</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                // Issues found
                let resultsHTML = `
                    <div class="diagnosis-card">
                        <div class="diagnosis-title"><i class="fas fa-stethoscope"></i> DIAGNOSIS RESULTS</div>
                        <div class="diagnosis-result">${diagnosticFacts.length} Issue(s) Identified</div>
                `;

                diagnosticFacts.forEach(problem => {
                    const solution = solutions[problem];
                    if (!solution) return;
                    
                    const severityColor = 
                        solution.severity === 'Critical' ? 'var(--danger)' : 
                        solution.severity === 'High' ? 'var(--warning)' : 
                        'var(--success)';
                        
                    resultsHTML += `
                        <div class="solution-card">
                            <div class="solution-title">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <i class="fas fa-wrench"></i> ${solution.title}
                                </div>
                                <span style="background: ${severityColor}; color: white; padding: 10px 20px; border-radius: 25px; font-size: 1rem; font-weight: 600; box-shadow: 0 6px 20px ${severityColor.replace('var(', '').replace(')', '') + '40'};">
                                    ${solution.severity} Priority
                                </span>
                            </div>
                            <div class="solution-meta">
                                <span><i class="fas fa-clock"></i> Estimated Time: ${solution.time}</span>
                                <span><i class="fas fa-dollar-sign"></i> Estimated Cost: ${solution.estimatedCost}</span>
                            </div>
                            <ul class="solution-steps">
                    `;
                    
                    solution.steps.forEach((step, index) => {
                        resultsHTML += `
                            <li><span class="step-number">${index + 1}</span> ${step}</li>
                        `;
                    });
                    
                    resultsHTML += `
                            </ul>
                        </div>
                    `;
                });

                resultsHTML += `</div>`;
                resultsContainer.innerHTML = resultsHTML;
            }
            
            // Scroll to results
            setTimeout(() => {
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // ========== UTILITY FUNCTIONS ==========
        function resetFacts() {
            allFacts.forEach(fact => {
                const checkbox = document.getElementById(fact.id);
                if (checkbox) checkbox.checked = false;
            });
            
            const log = document.getElementById('inferenceLog');
            log.innerHTML = `
                <div class="log-entry" style="border-left-color: var(--soft-pink);">
                    <div class="log-step"><i class="fas fa-info-circle"></i> System Ready</div>
                    <p>Select symptoms and click "Start Diagnosis" to begin the inference process.</p>
                    <p class="log-desc">The system will use forward chaining to analyze your symptoms against 15 expert rules, providing step-by-step reasoning.</p>
                </div>
            `;
            
            document.getElementById('resultsContainer').innerHTML = '';
            document.getElementById('loadingAnimation').style.display = 'none';
            updateSelectedFacts();
        }

        function loadExample() {
            resetFacts();
            
            // Set example: Squealing brakes (from your screenshot)
            document.getElementById('squealing_sound').checked = true;
            document.getElementById('braking').checked = true;
            
            updateSelectedFacts();
            
            // Update log to show example loaded
            const log = document.getElementById('inferenceLog');
            log.innerHTML = `
                <div class="log-entry" style="border-left-color: var(--warning);">
                    <div class="log-step"><i class="fas fa-vial"></i> Example Loaded</div>
                    <p>Loaded example symptoms: <span class="log-fact">Squealing sound from brakes, Sound occurs when braking</span></p>
                    <p class="log-desc">This will trigger Rule 7: "Squealing during braking indicates brake pads are worn" (Confidence: 95%)</p>
                </div>
            `;
            
            // Clear any previous results
            document.getElementById('resultsContainer').innerHTML = '';
        }

        // ========== EVENT LISTENERS ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize UI
            initializeUI();
            
            // Add event listeners to buttons
            document.getElementById('startDiagnosisBtn').addEventListener('click', runInference);
            document.getElementById('clearAllBtn').addEventListener('click', resetFacts);
            document.getElementById('loadExampleBtn').addEventListener('click', loadExample);
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    runInference();
                }
                if (e.key === 'Escape') {
                    resetFacts();
                }
                if (e.ctrlKey && e.key === 'e') {
                    loadExample();
                }
            });
        });
    </script>
</body>
</html>
